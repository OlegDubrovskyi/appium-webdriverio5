"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _utils = require("../utils");

let commands = {};

commands.installApp = async function (appPath) {
  await this.device.installApp(appPath);
};

commands.removeApp = async function (bundleId) {
  await this.device.removeApp(bundleId);
};

commands.closeApp = async function () {
  await this.device.closeApp();
};

commands.launchApp = async function () {
  await this.device.launchApp();
};

commands.isAppInstalled = async function (bundleId) {
  return await this.device.isAppInstalled(bundleId);
};

commands.yiCloseApp = async function () {
  let commandObject = {
    name: 'CloseApp'
  };
  let commandJSON = JSON.stringify(commandObject);
  let data = await this.executeSocketCommand(commandJSON);

  try {
    JSON.parse(data);
  } catch (e) {
    throw new Error("Bad response from CloseApp");
  }
};

commands.getPageSource = async function () {
  let source;
  let commandObject = {
    name: 'GetSRC'
  };
  let commandJSON = JSON.stringify(commandObject);
  source = await this.executeSocketCommand(commandJSON);

  if (source) {
    return source.toString();
  } else {
    throw new Error("Bad response from getTreeForXML");
  }
};

commands.getWindowSize = async function () {
  let commandObject = {
    name: `getWindowSize`
  };
  let commandJSON = JSON.stringify(commandObject);
  let data = await this.executeSocketCommand(commandJSON);
  let result;

  try {
    result = JSON.parse(data);
  } catch (e) {
    throw new Error("Bad response from window_size");
  }

  if (result.status === _utils.youiEngineDriverReturnValues.WEBDRIVER_NO_SUCH_WINDOW) {
    throw new Error("Could not find the requested surface");
  } else if (result.status === _utils.youiEngineDriverReturnValues.WEBDRIVER_UNKNOWN_COMMAND) {
    throw new Error("The requested command is not supported in the version of You.i Engine currently running.");
  }

  return result.value;
};

commands.hideKeyboard = async function () {
  let commandObject = {
    name: `hideKeyboard`
  };
  let commandJSON = JSON.stringify(commandObject);
  let data = await this.executeSocketCommand(commandJSON);
  let result;

  try {
    result = JSON.parse(data);
  } catch (e) {
    throw new Error("Bad response from hideKeyboard");
  }

  return result.value;
};

commands.isKeyboardShown = async function () {
  let commandObject = {
    name: `isKeyboardShown`
  };
  let commandJSON = JSON.stringify(commandObject);
  let data = await this.executeSocketCommand(commandJSON);
  let result;

  try {
    result = JSON.parse(data);
  } catch (e) {
    throw new Error("Bad response from isKeyboardShown");
  }

  return result.value;
};

var _default = commands;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9nZW5lcmFsLmpzIl0sIm5hbWVzIjpbImNvbW1hbmRzIiwiaW5zdGFsbEFwcCIsImFwcFBhdGgiLCJkZXZpY2UiLCJyZW1vdmVBcHAiLCJidW5kbGVJZCIsImNsb3NlQXBwIiwibGF1bmNoQXBwIiwiaXNBcHBJbnN0YWxsZWQiLCJ5aUNsb3NlQXBwIiwiY29tbWFuZE9iamVjdCIsIm5hbWUiLCJjb21tYW5kSlNPTiIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwiZXhlY3V0ZVNvY2tldENvbW1hbmQiLCJwYXJzZSIsImUiLCJFcnJvciIsImdldFBhZ2VTb3VyY2UiLCJzb3VyY2UiLCJ0b1N0cmluZyIsImdldFdpbmRvd1NpemUiLCJyZXN1bHQiLCJzdGF0dXMiLCJ5b3VpRW5naW5lRHJpdmVyUmV0dXJuVmFsdWVzIiwiV0VCRFJJVkVSX05PX1NVQ0hfV0lORE9XIiwiV0VCRFJJVkVSX1VOS05PV05fQ09NTUFORCIsInZhbHVlIiwiaGlkZUtleWJvYXJkIiwiaXNLZXlib2FyZFNob3duIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFFQSxJQUFJQSxRQUFRLEdBQUcsRUFBZjs7QUFFQUEsUUFBUSxDQUFDQyxVQUFULEdBQXNCLGdCQUFnQkMsT0FBaEIsRUFBeUI7QUFDN0MsUUFBTSxLQUFLQyxNQUFMLENBQVlGLFVBQVosQ0FBdUJDLE9BQXZCLENBQU47QUFDRCxDQUZEOztBQUlBRixRQUFRLENBQUNJLFNBQVQsR0FBcUIsZ0JBQWdCQyxRQUFoQixFQUEwQjtBQUM3QyxRQUFNLEtBQUtGLE1BQUwsQ0FBWUMsU0FBWixDQUFzQkMsUUFBdEIsQ0FBTjtBQUNELENBRkQ7O0FBSUFMLFFBQVEsQ0FBQ00sUUFBVCxHQUFvQixrQkFBa0I7QUFDcEMsUUFBTSxLQUFLSCxNQUFMLENBQVlHLFFBQVosRUFBTjtBQUNELENBRkQ7O0FBSUFOLFFBQVEsQ0FBQ08sU0FBVCxHQUFxQixrQkFBa0I7QUFDckMsUUFBTSxLQUFLSixNQUFMLENB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QU0sQ0FBQ0ssS0FBZDtBQUNELENBaEJEOztBQWtCQTdCLFFBQVEsQ0FBQytCLGVBQVQsR0FBMkIsa0JBQWtCO0FBRTNDLE1BQUlyQixhQUFhLEdBQUc7QUFDbEJDLElBQUFBLElBQUksRUFBRztBQURXLEdBQXBCO0FBR0EsTUFBSUMsV0FBVyxHQUFHQyxJQUFJLENBQUNDLFNBQUwsQ0FBZUosYUFBZixDQUFsQjtBQUVBLE1BQUlLLElBQUksR0FBRyxNQUFNLEtBQUtDLG9CQUFMLENBQTBCSixXQUExQixDQUFqQjtBQUVBLE1BQUlZLE1BQUo7O0FBQ0EsTUFBSTtBQUNGQSxJQUFBQSxNQUFNLEdBQUdYLElBQUksQ0FBQ0ksS0FBTCxDQUFXRixJQUFYLENBQVQ7QUFDRCxHQUZELENBRUUsT0FBT0csQ0FBUCxFQUFVO0FBQ1YsVUFBTSxJQUFJQyxLQUFKLENBQVUsbUNBQVYsQ0FBTjtBQUNEOztBQUNELFNBQU9LLE1BQU0sQ0FBQ0ssS0FBZDtBQUNELENBaEJEOztlQWtCZTdCLFEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB5b3VpRW5naW5lRHJpdmVyUmV0dXJuVmFsdWVzIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5sZXQgY29tbWFuZHMgPSB7fTtcblxuY29tbWFuZHMuaW5zdGFsbEFwcCA9IGFzeW5jIGZ1bmN0aW9uIChhcHBQYXRoKSB7XG4gIGF3YWl0IHRoaXMuZGV2aWNlLmluc3RhbGxBcHAoYXBwUGF0aCk7XG59O1xuXG5jb21tYW5kcy5yZW1vdmVBcHAgPSBhc3luYyBmdW5jdGlvbiAoYnVuZGxlSWQpIHtcbiAgYXdhaXQgdGhpcy5kZXZpY2UucmVtb3ZlQXBwKGJ1bmRsZUlkKTtcbn07XG5cbmNvbW1hbmRzLmNsb3NlQXBwID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBhd2FpdCB0aGlzLmRldmljZS5jbG9zZUFwcCgpO1xufTtcblxuY29tbWFuZHMubGF1bmNoQXBwID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBhd2FpdCB0aGlzLmRldmljZS5sYXVuY2hBcHAoKTtcbn07XG5cbmNvbW1hbmRzLmlzQXBwSW5zdGFsbGVkID0gYXN5bmMgZnVuY3Rpb24gKGJ1bmRsZUlkKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmRldmljZS5pc0FwcEluc3RhbGxlZChidW5kbGVJZCk7XG59O1xuXG5jb21tYW5kcy55aUNsb3NlQXBwID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsZXQgY29tbWFuZE9iamVjdCA9IHtcbiAgICBuYW1lOiAnQ2xvc2VBcHAnXG4gIH07XG4gIGxldCBjb21tYW5kSlNPTiA9IEpTT04uc3RyaW5naWZ5KGNvbW1hbmRPYmplY3QpO1xuXG4gIGxldCBkYXRhID0gYXdhaXQgdGhpcy5leGVjdXRlU29ja2V0Q29tbWFuZChjb21tYW5kSlNPTik7XG4gIHRyeSB7XG4gICAgSlNPTi5wYXJzZShkYXRhKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkJhZCByZXNwb25zZSBmcm9tIENsb3NlQXBwXCIpO1xuICB9XG59O1xuXG5jb21tYW5kcy5nZXRQYWdlU291cmNlID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuXG4gIGxldCBzb3VyY2U7XG5cbiAgbGV0IGNvbW1hbmRPYmplY3QgPSB7XG4gICAgbmFtZTogJ0dldFNSQydcbiAgfTtcbiAgbGV0IGNvbW1hbmRKU09OID0gSlNPTi5zdHJpbmdpZnkoY29tbWFuZE9iamVjdCk7XG5cbiAgc291cmNlID0gYXdhaXQgdGhpcy5leGVjdXRlU29ja2V0Q29tbWFuZChjb21tYW5kSlNPTik7XG5cbiAgaWYgKHNvdXJjZSkge1xuICAgIHJldHVybiBzb3VyY2UudG9TdHJpbmcoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW4gYnV0IHdlJ3ZlIHJlY2VpdmVkIGJ1ZyByZXBvcnRzOyB0aGlzIHdpbGwgaGVscCB1cyB0cmFjayBkb3duXG4gICAgLy8gd2hhdCdzIHdyb25nIGluIGdldFRyZWVGb3JYTUxcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgcmVzcG9uc2UgZnJvbSBnZXRUcmVlRm9yWE1MXCIpO1xuICB9XG59O1xuXG5jb21tYW5kcy5nZXRXaW5kb3dTaXplID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuXG4gIGxldCBjb21tYW5kT2JqZWN0ID0ge1xuICAgIG5hbWU6IGBnZXRXaW5kb3dTaXplYFxuICB9O1xuICBsZXQgY29tbWFuZEpTT04gPSBKU09OLnN0cmluZ2lmeShjb21tYW5kT2JqZWN0KTtcblxuICBsZXQgZGF0YSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVNvY2tldENvbW1hbmQoY29tbWFuZEpTT04pO1xuXG4gIGxldCByZXN1bHQ7XG4gIHRyeSB7XG4gICAgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkJhZCByZXNwb25zZSBmcm9tIHdpbmRvd19zaXplXCIpO1xuICB9XG5cbiAgLy8gZ2V0IHN0YXR1cyByZXR1cm5lZCBhbmQgaGFuZGxlIGVycm9ycyByZXR1cm5lZCBmcm9tIHNlcnZlclxuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0geW91aUVuZ2luZURyaXZlclJldHVyblZhbHVlcy5XRUJEUklWRVJfTk9fU1VDSF9XSU5ET1cpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmluZCB0aGUgcmVxdWVzdGVkIHN1cmZhY2VcIik7XG4gIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0geW91aUVuZ2luZURyaXZlclJldHVyblZhbHVlcy5XRUJEUklWRVJfVU5LTk9XTl9DT01NQU5EKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHJlcXVlc3RlZCBjb21tYW5kIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIHZlcnNpb24gb2YgWW91LmkgRW5naW5lIGN1cnJlbnRseSBydW5uaW5nLlwiKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQudmFsdWU7XG59O1xuXG5jb21tYW5kcy5oaWRlS2V5Ym9hcmQgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG5cbiAgbGV0IGNvbW1hbmRPYmplY3QgPSB7XG4gICAgbmFtZTogYGhpZGVLZXlib2FyZGBcbiAgfTtcbiAgbGV0IGNvbW1hbmRKU09OID0gSlNPTi5zdHJpbmdpZnkoY29tbWFuZE9iamVjdCk7XG5cbiAgbGV0IGRhdGEgPSBhd2FpdCB0aGlzLmV4ZWN1dGVTb2NrZXRDb21tYW5kKGNvbW1hbmRKU09OKTtcblxuICBsZXQgcmVzdWx0O1xuICB0cnkge1xuICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgcmVzcG9uc2UgZnJvbSBoaWRlS2V5Ym9hcmRcIik7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbn07XG5cbmNvbW1hbmRzLmlzS2V5Ym9hcmRTaG93biA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcblxuICBsZXQgY29tbWFuZE9iamVjdCA9IHtcbiAgICBuYW1lOiBgaXNLZXlib2FyZFNob3duYFxuICB9O1xuICBsZXQgY29tbWFuZEpTT04gPSBKU09OLnN0cmluZ2lmeShjb21tYW5kT2JqZWN0KTtcblxuICBsZXQgZGF0YSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVNvY2tldENvbW1hbmQoY29tbWFuZEpTT04pO1xuXG4gIGxldCByZXN1bHQ7XG4gIHRyeSB7XG4gICAgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkJhZCByZXNwb25zZSBmcm9tIGlzS2V5Ym9hcmRTaG93blwiKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0LnZhbHVlO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFuZHM7XG4iXSwiZmlsZSI6ImxpYi9jb21tYW5kcy9nZW5lcmFsLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uIn0=
